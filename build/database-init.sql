create table if not exists buyers (
    buyer_unit_id integer primary key,
    buyer_unit_name varchar,
    buyer_organization_id integer,
    buyer_organization_name varchar,
    buyer_unit_rut varchar,
    buyer_sector varchar,
    buyer_unit_address varchar,
    buyer_unit_country varchar,
    buyer_unit_region varchar,
    buyer_unit_city varchar,
    buyer_unit_commune varchar,
    buyer_activity varchar,
);

create table if not exists suppliers (
    supplier_id	integer primary key,
    supplier_name varchar,
    supplier_rut varchar,
    supplier_business_name varchar,
    supplier_description varchar,
    supplier_activity varchar,
    supplier_branch_id	integer,
    supplier_branch_name varchar,
    supplier_branch_rut varchar,
    supplier_country varchar,
    supplier_region varchar,
    supplier_commune varchar, 
);

create table if not exists tenders (
    tender_id varchar primary key,
    buyer_unit_id integer references buyers(buyer_unit_id),
    tender_link varchar,
    tender_external_id varchar,
    tender_name varchar,
    tender_description varchar,
    tender_type_description varchar,
    tender_id_status integer,
    tender_status varchar,
    is_tender_informed integer,
    is_public_or_private integer,
    tender_type varchar,
    is_open_or_closed_call integer,
    tender_currency_id varchar,
    tender_currency_name varchar,
    tender_stages integer,
    status_stages integer,
    is_tender_with_comptroller_approval integer,
    contract_signing_status integer,
    contract_mode integer,
    is_it_construction integer,
    complaints_count integer,
    creation_date date,
    closing_date date,
    forum_start_date date,
    forum_close_date date,
    answers_publication_date date,
    tech_open_date date,
    econ_open_date date,
    publication_date date,
    award_date date,
    award_est_date date,
    physical_support_doc_date date,
    pre_evaluation_time integer,
    pre_evaluation_time_unit varchar,
    est_contract_signing_date date,
    user_additional_date integer,
    site_visit_date	date,
    site_address varchar,
    background_info_submission_date date,
    background_info_delivery_address varchar,
    amount_estimation_type_id integer,
    funding_source varchar,
    is_estimated_amount_public integer,
    estimated_amount integer,
    final_evaluation_time integer,
    final_evaluation_time_unit varchar,
    payment_method_contract varchar,
    payment_type_contract integer,
    prohibited_conditions_contract varchar,
    is_subcontracting_allowed integer,
    contract_duration_unit integer,
    contract_duration integer,
    contract_duration_type varchar,
    estimated_amount_justification varchar,
    contract_notes varchar,
    is_submission_deadline_extended integer,
    is_standard_created integer,
    unit_time_contract integer,
    renewal_time_contract integer,
    renewal_period_contract varchar,
    is_contract_renewable integer,
    contract_adjudication_act_type integer,
    contract_adjudication_number varchar,
    contract_adjudication_date date,
    number_of_bidders integer,
    tender_id_status_2 integer,
    awarded_estimated_amount float,
);

create table if not exists item_tenders (
    item_tenders_id integer primary key,
    tender_id varchar references tenders(tender_id),
    item_sequential_number integer,
    item_unspsc_id	integer,
    item_category_1	varchar,
    item_category_2	varchar,
    item_category_3	varchar,
    product_generic_name varchar,
    acquisition_line_name varchar,
    acquisition_line_description varchar,
    item_unit_of_measure varchar,
    item_quantity integer,
    item_secondary_unit_measure varchar,
);

create table if not exists bids (
    item_tenders_id integer references item_tenders(item_tenders_id),
    supplier_id integer references suppliers(supplier_id),
    bid_name varchar,
    bid_status varchar,
    bid_submission_date date,
    bid_currency varchar,
    bid_offered_items_quantity integer,
    bid_unit_price float,
    bid_total_price	float,
    is_tech_bid_published integer,
    tech_bid_publication_justification varchar,
    bid_final_status varchar,
    is_bid_awarded	varchar,
    awarded_items_quantity integer,
    awarded_total_price	float,

);

create table if not exists purchases (
    purchase_id integer primary key,
    purchase_external_id varchar,
    buyer_unit_id integer references buyers(buyer_unit_id),
    purchase_link varchar,
    purchase_name varchar,
    purchase_description varchar,
    purchase_type varchar,
    purchase_source	varchar,
    is_direct_procurement varchar,
    is_agile_procurement varchar,
    purchase_type_id integer,
    purchase_type_abbreviated_id varchar,
    purchase_type_description varchar,
    procurement_plan_id	integer,
    purchase_status_id integer,
    purchase_status	varchar,
    purchase_supplier_status_id integer,
    purchase_supplier_status varchar,
    purchase_creation_date date,
    purchase_sending_date date,
    purchase_cancellation_request_date date,
    purchase_last_modification_date date,
    purchase_accepted_date date,
    purchase_cancellation_date date,
    is_a_purchase_with_items varchar,
    purchase_supplier_average_rating float,
    purchase_supplier_evaluations_count integer,
    purchase_total_amount float,
    purchase_currency_type varchar,
    purchase_total_amount_clp float,
    purchase_taxes float,
    purchase_tax_type varchar,
    purchase_discounts float,
    purchase_charges float,
    purchase_net_total float,
    purchase_funding_source varchar,
    purchase_vat_percentage integer,
    purchase_country varchar,
    purchase_shipping_type integer,
    purchase_payment_method integer,
    purchase_tender_id varchar,
    purchase_framework_agreement_id varchar,
);

create table if not exists item_purchases (
    item_purchases_id varchar primary key,
    purchase_id integer references purchases(purchase_id),
    supplier_id integer references suppliers(supplier_id),
    item_category_id integer,
    item_category varchar,
    item_unspsc_id integer,
    product_generic_name varchar,
    item_category_1 varchar,
    item_category_2	varchar,
    item_category_3	varchar,
    buyer_product_specifications varchar,
    supplier_product_specifications varchar,
    item_quantity float,
    item_unit_of_measure varchar,
    item_currency varchar,
    item_net_price float,
    item_total_charges float,
    item_total_discounts float,
    item_total_taxes float,
    acquired_items_net_total float,
    item_payment_method	varchar,
);
